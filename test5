-- =====================================================
-- SCRIPT LOADER GUI - Styled to match Freeze Trade
-- ✅ Dark theme, Gotham font, UIStroke borders
-- ✅ Mobile & PC dragging support
-- ✅ Minimize button
-- =====================================================

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer

-- SCREEN GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ScriptLoaderGUI"
ScreenGui.IgnoreGuiInset = false
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = game.CoreGui or player:WaitForChild("PlayerGui")

local isMinimized = false
local FULL_HEIGHT = 267  -- increased to fit 4 buttons
local MINI_HEIGHT = 36

-- MAIN FRAME
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 250, 0, FULL_HEIGHT)
MainFrame.Position = UDim2.new(0.5, -125, 0.5, -87)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
MainFrame.BorderSizePixel = 0
MainFrame.ZIndex = 1
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 10)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Thickness = 2
MainStroke.Color = Color3.fromRGB(60, 60, 70)
MainStroke.Parent = MainFrame

-- TITLE BAR
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 36)
TitleBar.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
TitleBar.BorderSizePixel = 0
TitleBar.Active = true
TitleBar.ZIndex = 2
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 10)
TitleCorner.Parent = TitleBar

local TitleStroke = Instance.new("UIStroke")
TitleStroke.Thickness = 1
TitleStroke.Color = Color3.fromRGB(70, 70, 80)
TitleStroke.Parent = TitleBar

local Title = Instance.new("TextLabel")
Title.Text = "SCRIPT LOADER"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 15
Title.TextColor3 = Color3.fromRGB(220, 220, 230)
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, -50, 1, 0)
Title.Position = UDim2.new(0, 12, 0, 0)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.ZIndex = 3
Title.Parent = TitleBar

-- MINIMIZE BUTTON
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 26, 0, 26)
MinimizeButton.Position = UDim2.new(1, -30, 0.5, -13)
MinimizeButton.Text = "−"
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 18
MinimizeButton.TextColor3 = Color3.fromRGB(220, 220, 230)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.ZIndex = 3
MinimizeButton.Parent = TitleBar

local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 6)
MinimizeCorner.Parent = MinimizeButton

MinimizeButton.MouseButton1Click:Connect(function()
	isMinimized = not isMinimized
	if isMinimized then
		TweenService:Create(MainFrame, TweenInfo.new(0.2), {
			Size = UDim2.new(0, 250, 0, MINI_HEIGHT)
		}):Play()
		MinimizeButton.Text = "+"
	else
		TweenService:Create(MainFrame, TweenInfo.new(0.2), {
			Size = UDim2.new(0, 250, 0, FULL_HEIGHT)
		}):Play()
		MinimizeButton.Text = "−"
	end
end)

-- CONTENT FRAME
local Content = Instance.new("Frame")
Content.BackgroundTransparency = 1
Content.Size = UDim2.new(1, -24, 1, -46)
Content.Position = UDim2.new(0, 12, 0, 42)
Content.ZIndex = 2
Content.Parent = MainFrame

-- BUTTON CREATOR
local function createScriptButton(text, y, onClick)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1, 0, 0, 40)
	frame.Position = UDim2.new(0, 0, 0, y)
	frame.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
	frame.BorderSizePixel = 0
	frame.ZIndex = 3
	frame.Parent = Content

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = frame

	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, 0, 1, 0)
	btn.BackgroundTransparency = 1
	btn.Text = text
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 13
	btn.TextColor3 = Color3.fromRGB(220, 220, 230)
	btn.ZIndex = 4
	btn.Parent = frame

	btn.MouseEnter:Connect(function()
		TweenService:Create(frame, TweenInfo.new(0.15), {
			BackgroundColor3 = Color3.fromRGB(50, 50, 58)
		}):Play()
	end)
	btn.MouseLeave:Connect(function()
		TweenService:Create(frame, TweenInfo.new(0.15), {
			BackgroundColor3 = Color3.fromRGB(35, 35, 40)
		}):Play()
	end)

	btn.MouseButton1Click:Connect(onClick)
	return btn
end

-- BUTTONS
createScriptButton("Dupe Script", 0, function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-IDP/etfblib/refs/heads/main/dupevisual2"))()
end)

createScriptButton("Trade Scam Script", 46, function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-IDP/etfblib/refs/heads/main/freezetrade2"))()
end)

createScriptButton("Inf Hub", 92, function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-IDP/etfblib/refs/heads/main/infhub"))()
end)

createScriptButton("Brainrot Spawner", 138, function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-IDP/etfblib/refs/heads/main/SPAWNER"))()
end)

-- =====================================================
-- DRAG SYSTEM (MOBILE & PC SUPPORT)
-- =====================================================

local dragging = false
local dragInput = nil
local dragStart = nil
local startPos = nil

local function updateDrag(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)
end

TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or
	   input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or
	   input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		updateDrag(input)
	end
end)
